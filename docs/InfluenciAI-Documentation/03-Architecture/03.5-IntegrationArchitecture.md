# Arquitetura de Integração — Redes Sociais

Consolida padrões e fluxos para publicação e coleta de dados, com foco em resiliência e conformidade (ver também `docs/Motivação/influenciai-business-rules.md`).

Princípios:

- Abstração por adaptador: cada rede implementa uma interface comum (publish, collect, auth)
- Resiliência: retry/backoff, circuit breaker, isolamento por bulkhead
- Rate limiting: políticas por rede e por conta; fila interna com capacidade controlada
- Segurança: armazenamento de tokens seguro (Key Vault), escopos mínimos

Fluxos principais:

- Publicação multi-rede
  - Normalização do conteúdo (texto/mídia/hashtags) por rede
  - Orquestração (saga) com compensações em caso de falha parcial
  - Telemetria detalhada por etapa (preparação → envio → confirmação)

- Coleta de métricas
  - Real-time/near real-time para engajamento inicial
  - Batch para dados agregados (perfil, concorrentes, séries históricas)
  - Triggers para coleta intensiva (viralização, crise, campanhas)

Contratos e interfaces (exemplo):

```csharp
public interface ISocialPublisher
{
    Task<PublishResult> PublishAsync(PublishRequest request, CancellationToken ct);
}

public interface ISocialMetricsCollector
{
    Task<MetricsSnapshot> CollectAsync(MetricsRequest request, CancellationToken ct);
}
```

Telemetria e conformidade:

- IDs correlacionados por publicação/coleta
- Auditoria de ações e acessos
- Controles para LGPD (retenção, minimização, consentimento quando aplicável)

