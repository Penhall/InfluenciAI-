# API Endpoints — Visão e Requisitos

Principais endpoints atualmente implementados (Minimal API, .NET 10 RC).

Saúde e Operação:
- GET `/version` — informações básicas de versão/ambiente (livre)
- GET `/health/live` — liveness
- GET `/health/ready` — readiness (formato HealthChecks UI)
- GET `/health/ui` — HealthChecks UI

Autenticação e Identidade:
- POST `/auth/register` — cria usuário (Identity); body: `{ tenantId, email, password, displayName? }` — livre (controlado via backend/ambiente)
- POST `/auth/login` — retorna JWT; body: `{ email, password }` — livre
  - Claims no token: `sub` (user id), `name`, `tenant`, múltiplos `role`

Tenants (requer `Authorization: Bearer ...` e role `admin`):
- GET `/api/tenants` — lista
- GET `/api/tenants/{id}` — obter
- POST `/api/tenants` — criar
- PUT `/api/tenants/{id}` — atualizar
- DELETE `/api/tenants/{id}` — excluir

Users por Tenant (requer `Authorization` e role `admin` + match do claim `tenant` com `{tenantId}`):
- GET `/api/tenants/{tenantId}/users`
- POST `/api/tenants/{tenantId}/users` — body: `{ email, password, displayName? }`
- PUT `/api/tenants/{tenantId}/users/{id}` — body: `{ email?, displayName? }`
- DELETE `/api/tenants/{tenantId}/users/{id}`

Notas de CORS:
- Em dev, `Cors.AllowAllInDev = true` habilita qualquer origem.
- Em prod/staging, use `Cors.AllowedOrigins` e, opcionalmente, `Cors:Tenants:{TENANT_ID}:AllowedOrigins`.
