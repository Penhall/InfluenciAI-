# Plano de Implementação — InfluenciAI

Baseado e consolidado a partir de:

- `docs/Motivação/implementation-phases.md`
- `docs/Motivação/modular-implementation-roadmap.md`
- `docs/Motivação/roadmap-release-plan.md`
- `docs/Motivação/complete-project-backlog.md`

Princípios:

- Entregas incrementais orientadas a valor (feature flags)
- Qualidade e observabilidade desde o início
- Redução de risco com integrações progressivas (uma rede por vez)

Fase 1 – Foundation (Semanas 1–12)

- Arquitetura base (Clean Architecture, DI, MediatR)
- Persistência (PostgreSQL/EF Core), cache (Redis), mensageria (Service Bus/RabbitMQ)
- Identidade e Segurança: ASP.NET Core Identity + JWT (roles/políticas), CORS dinâmico por tenant; device code flow no desktop
- Observabilidade (logs/traces/metrics) e CI/CD inicial

Critérios de aceite:

- [x] Serviços esqueleto por domínio (Domain/Application/Infrastructure/API)
- [ ] Pipelines CI/CD com quality gates
- [x] Telemetria básica ativa
- [x] Auth base funcional (Identity + JWT), refresh tokens e CORS configurado

Status Atual (05/11/2025) - Fase 1: ~80% Completa

**Implementado:**
- [x] API Minimal com endpoints de Tenants e Auth (login/refresh/logout), HealthChecks, OpenTelemetry
- [x] Persistência com EF Core (PostgreSQL) + migrações + seed em Development
- [x] Desktop (WPF) com Login, Tenants (CRUD) e Usuários por tenant; auto-refresh de token no cliente
- [x] Testes unitários para Tenants e CORS; build/test locais estáveis
- [x] Docker Compose (PostgreSQL, Redis, RabbitMQ)
- [x] Clean Architecture implementada (Domain, Application, Infrastructure, API)
- [x] CQRS com MediatR funcionando

**Pendências Fase 1:**
- [ ] Pipeline CI/CD com quality gates
- [ ] Externalizar segredos (JWT Key → User Secrets/Key Vault)
- [ ] Estabilizar testes de integração (remover Skips)
- [ ] Job de limpeza de refresh tokens expirados
- [ ] ProblemDetails padronizado na API
- [ ] Melhorias de UX no Desktop (validações, feedback sessão expirada)

**Análise de Aderência:** A Fase 1 entregou 80% da infraestrutura base, mas 0% das funcionalidades de negócio. O projeto tem fundação sólida, mas não demonstra valor ao usuário final.

---

MVP "Single Network Publisher" (Nova Prioridade)

**Objetivo:** Implementar o primeiro fluxo end-to-end de valor de negócio.

**Escopo Mínimo:**
- Conectar conta do Twitter/X (OAuth 2.0)
- Criar post com texto (máx 280 chars)
- Publicar no Twitter/X
- Coletar métricas básicas (views, likes, retweets, replies)
- Exibir métricas no Desktop em tempo real

**Benefício:** Demonstra o core value da plataforma: "publicar conteúdo e ver resultados".

**Estrutura de Implementação:**

Sprint 1-2: Twitter Integration (2 semanas)
- [ ] Integrar Twitter API v2 (pacote Tweetinvi)
- [ ] Implementar OAuth 2.0 flow para conectar contas
- [ ] Criar entidades: SocialProfile, SocialConnection
- [ ] Endpoint: POST /api/social-profiles (conectar Twitter)
- [ ] Endpoint: GET /api/social-profiles (listar conexões)
- [ ] Criar entidades: Content, Publication
- [ ] Endpoint: POST /api/content (criar post)
- [ ] Endpoint: POST /api/content/{id}/publish (publicar no Twitter)
- [ ] Desktop: View para conectar Twitter
- [ ] Desktop: View para criar e publicar post

Sprint 3-4: Basic Analytics (2 semanas)
- [ ] Criar Background Service: DataCollectorService
- [ ] Coletar métricas a cada 5 min (primeiras 2h) depois a cada 1h
- [ ] Criar entidades: MetricSnapshot, MetricTimeseries
- [ ] Endpoint: GET /api/content/{id}/metrics
- [ ] Desktop: View para ver métricas em tempo real (gráfico + números)
- [ ] Implementar cache Redis para métricas recentes

Sprint 5-6: Polish & Stabilization (1-2 semanas)
- [ ] Tratamento de erros (rate limit, API down, token expirado)
- [ ] Retry logic com Polly
- [ ] Testes end-to-end do fluxo completo
- [ ] Documentação de uso
- [ ] CI/CD básico (build + test)
- [ ] Code review e refactoring

**Critérios de Aceite (MVP):**
- [ ] Usuário consegue conectar conta do Twitter via Desktop
- [ ] Usuário consegue criar e publicar tweet de 280 chars
- [ ] Métricas aparecem no Desktop em até 5 minutos
- [ ] Sistema trata erro de rate limit gracefully
- [ ] Testes cobrem fluxo principal (happy path + error cases)

Fase 2 — Core Features (Semanas 13–24)

- Content & Publishing (modelo e API)
- Scheduling (calendário, fuso, janelas)
- Analytics v1 (métricas básicas e agregações)
- Integrações: Twitter/X end‑to‑end

Critérios de aceite:

- [ ] Publicação e coleta no Twitter/X
- [ ] Agendamento funcional com políticas por rede
- [ ] Relatórios básicos (dashboards e export)

Fase 3 — Multi‑Network & Automation (Semanas 25–36)

- Integrações: Instagram e LinkedIn
- Abstrações de rede unificadas
- Automation & Notifications (regras, alertas)

Critérios de aceite:

- [ ] Duas novas redes integradas
- [ ] Notificações e automações básicas

Fase 4 — UX & Release (Semanas 37–48)

- WPF shell, navegação e dashboard
- Performance tuning, hardening, documentação
- Empacotamento MSIX e plano de lançamento

Critérios de aceite:

- [ ] Desktop pronto para beta
- [ ] Processos operacionais e playbooks

Riscos e mitigação (exemplos):

- OAuth desktop complexo → device code flow + WebView2 opcional (futuro)
- Rate limiting → filas internas, backoff, priorização
- Mudanças de APIs → camada de abstração + fallback
 - Alinhamento de versões RC/GA (.NET 10, EF/Npgsql) → monitorar releases e atualizar para GA assim que disponível

Marcos:

- Milestone 1: Foundation completa (fim Fase 1)
- Milestone 2: Core features (fim Fase 2)
- Milestone 3: Multi‑network pronto (fim Fase 3)
- Milestone 4: Beta/Go‑live (fim Fase 4)
